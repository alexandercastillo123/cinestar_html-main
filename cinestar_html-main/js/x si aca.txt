const getCine = async () => {
    const id = new URLSearchParams(window.location.search).get('id');
    
    try {
        // Definir las URLs de las extensiones adicionales
        const urls = [
            `https://oaemdl.es/cinestar_sweb_php/cines/${id}`,
            `https://oaemdl.es/cinestar_sweb_php/extension1/${id}`,  // Otra extensión
            `https://oaemdl.es/cinestar_sweb_php/extension2/${id}`   // Otra extensión adicional
        ];
        
        // Hacer las solicitudes en paralelo
        const responses = await Promise.all(urls.map(url => fetch(url)));
        
        // Chequear si todas las solicitudes fueron exitosas
        const allResponsesOk = responses.every(response => response.status === 200);
        
        if (allResponsesOk) {
            // Procesar todas las respuestas y obtener los datos en JSON
            const dataArr = await Promise.all(responses.map(response => response.json()));

            // Asumimos que el primer dato (dataArr[0]) es el principal (del cine)
            const cine = dataArr[0].data;
            // Agregar datos adicionales de las otras extensiones según lo necesites
            const extension1 = dataArr[1].data;
            const extension2 = dataArr[2].data;

            let html = `
                <h2>Cinestar Excelsior</h2>
                <div class="cine-info">
                    <div class="cine-info datos">
                        <p>${cine.Direccion}</p>
                        <p>Teléfono: ${cine.Telefonos}</p>
                        <br/>
                        <div class="tabla">
                            <div class="fila">
                                <div class="celda-titulo">${cine.DiasSemana}</div>
                                <div class="celda">${cine.Precio}</div>
                            </div>
                            <!-- Aquí puedes usar datos de extension1 y extension2 -->
                            <div class="fila impar">
                                <div class="celda-titulo">${extension1?.DiasSemana || 'N/A'}</div>
                                <div class="celda">${extension1?.Precio || 'N/A'}</div>
                            </div>
                            <div class="fila">
                                <div class="celda-titulo">${extension2?.DiasSemana || 'N/A'}</div>
                                <div class="celda">${extension2?.Precio || 'N/A'}</div>
                            </div>
                        </div>
                        <div class="aviso">
                            <p>A partir del 1ro de julio de 2016, Cinestar Multicines realizará el cobro de la comisión de S/. 1.00 adicional...</p>
                        </div>
                    </div>
                    <img src="img/cine/1.2.jpg"/>
                    <br/><br/><h4>Los horarios de cada función están sujetos a cambios sin previo aviso.</h4><br/>
                    <div class="cine-info peliculas">
                        <!-- Puedes agregar más contenido aquí con datos adicionales -->
                    </div>
                </div>
            `;

            document.getElementById('contenido-interno').innerHTML = html;
        } else {
            console.error('Error en una o más solicitudes');
        }
    } catch (error) {
        console.error('Error:', error);
    }
};

getCine();
